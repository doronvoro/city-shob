// ============================================
// CityShob Design System - Form Components
// ============================================

@use '../abstracts/mixins' as *;

// ==========================================
// FORM FIELD CONTAINER
// ==========================================

.form-field {
  margin-bottom: var(--spacing-5);

  &:last-child {
    margin-bottom: 0;
  }
}

// ==========================================
// LABELS
// ==========================================

.form-label {
  @include form-label;
}

.form-label-required {
  &::after {
    content: '*';
    color: var(--error);
    margin-left: var(--spacing-1);
  }
}

// ==========================================
// TEXT INPUT
// ==========================================

.form-input {
  @include form-field;
}

.form-input-sm {
  padding: var(--spacing-2) var(--spacing-3);
  font-size: var(--text-sm);
}

.form-input-lg {
  padding: var(--spacing-4) var(--spacing-5);
  font-size: var(--text-lg);
}

// ==========================================
// TEXTAREA
// ==========================================

.form-textarea {
  @include form-field;
  min-height: 120px;
  resize: vertical;
}

// ==========================================
// SELECT
// ==========================================

.form-select {
  @include form-field;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23a8a8a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--spacing-3) center;
  padding-right: var(--spacing-10);
  cursor: pointer;
}

// ==========================================
// ERROR STATES
// ==========================================

.form-input-error,
.form-textarea-error,
.form-select-error {
  border-color: var(--error) !important;

  &:focus {
    box-shadow: 0 0 0 3px rgba(var(--error-rgb), 0.15) !important;
  }
}

.form-error {
  @include caption;
  color: var(--error);
  margin-top: var(--spacing-1);
  display: flex;
  align-items: center;
  gap: var(--spacing-1);

  .error-icon {
    width: 14px;
    height: 14px;
  }
}

// ==========================================
// HELPER TEXT
// ==========================================

.form-helper {
  @include caption;
  color: var(--text-muted);
  margin-top: var(--spacing-1);
}

// ==========================================
// PRIORITY SELECTOR
// ==========================================

.priority-selector {
  display: flex;
  gap: var(--spacing-2);
}

.priority-option {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-1);
  padding: var(--spacing-3);
  background: transparent;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);

  &:hover {
    border-color: var(--border-strong);
    background: var(--bg-tertiary);
  }

  &.selected {
    border-color: var(--accent-primary);
    background: rgba(var(--accent-primary-rgb), 0.05);
  }

  .priority-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;

    &.high { background: var(--priority-high); }
    &.medium { background: var(--priority-medium); }
    &.low { background: var(--priority-low); }
  }

  .priority-label {
    @include caption;
    color: var(--text-secondary);
  }
}

// ==========================================
// INPUT GROUP
// ==========================================

.input-group {
  display: flex;

  .form-input {
    border-radius: 0;

    &:first-child {
      border-radius: var(--radius-md) 0 0 var(--radius-md);
    }

    &:last-child {
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
    }
  }

  .input-group-addon {
    @include flex-center;
    padding: 0 var(--spacing-3);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-default);
    color: var(--text-secondary);
    font-size: var(--text-sm);

    &:first-child {
      border-right: none;
      border-radius: var(--radius-md) 0 0 var(--radius-md);
    }

    &:last-child {
      border-left: none;
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
    }
  }
}

// ==========================================
// FORM ACTIONS
// ==========================================

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-3);
  margin-top: var(--spacing-6);
  padding-top: var(--spacing-5);
  border-top: 1px solid var(--border-subtle);
}

// ==========================================
// DATE PICKER STYLING
// ==========================================

.form-date {
  @include form-field;
  position: relative;

  &::-webkit-calendar-picker-indicator {
    filter: invert(0.7);
    cursor: pointer;
  }
}
